(this["webpackJsonpnotion-graphs"]=this["webpackJsonpnotion-graphs"]||[]).push([[0],{38:function(t,e,n){},40:function(t,e,n){},46:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),c=n(29),i=n.n(c),o=(n(38),n(15)),l=n(1),s=n(8),u=n(26),m=n(7),d=n(6),f=n.n(d),v=n(30),b=n(56),p=n(57),h=n(58),j=n(60),O=n(59),g=(n(40),n(19)),E=n.p+"static/media/loop2.37a8f9ca.svg",y=function(){var t=window.location.search,e=Object(a.useRef)(null),n=Object(g.a)(t,function(){var t=Object(v.a)(f.a.mark((function t(e){var n,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://localhost:5000/line_graph"+e,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/jsson",Cache:"no-cache"},credentials:"include"});case 2:return n=t.sent,t.next=5,n.json();case 5:if(a=t.sent,400!==n.status){t.next=8;break}throw a;case 8:return t.abrupt("return",a);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),{refreshInterval:3e4}).data,c=Object(a.useState)((function(){return{visibility:"hidden",transform:"translate(0,0)"}})),i=Object(m.a)(c,2),o=i[0],d=i[1],y=Object(a.useState)((function(){return{title:"",activeElement:null}})),x=Object(m.a)(y,2),k=x[0],w=x[1];Object(a.useEffect)((function(){if(null!=e&&null!=e.current&&n){var a=n.data_points,r=new Map(Object.entries(n.series)),c=new URLSearchParams(t),i=function(t){return parseInt(c.get(t))},o=function(t,e){var n=i("".concat(t,"Min")),a=i("".concat(t,"Max"));if(!n||!a){var r=function(t,e){var n,a;return n=Math.min.apply(Math,Object(u.a)(t.map((function(t){return t[e]})))),(a=Math.max.apply(Math,Object(u.a)(t.map((function(t){return t[e]})))))===n&&(a+=0===a?1:.1*Math.abs(a)),[n,a]}(Array.from(e),t),c=Object(m.a)(r,2),o=c[0],l=c[1];return[n||o,a||l]}return[n,a]},l=o("x",a),f=Object(m.a)(l,2),v=f[0],g=f[1],E=o("y",a),y=Object(m.a)(E,2),x=y[0],k=y[1],M=o("size",a),L=Object(m.a)(M,2),C=L[0],S=L[1],A=Object(b.a)(e.current),_=e.current.clientWidth-50,T=e.current.clientHeight-50,z=[v,g+.1*Math.abs(g-v)],B=[25,_],D=n.is_x_time?Object(p.a)(z,B):Object(h.a)(z,B),I=Object(h.a)().domain([x-.1*Math.abs(k-x),k]).range([T,65]),N=Object(h.a)().domain([C,S+.1*Math.abs(S-C)]).range([5,15]);A.append("g").attr("class","x axis").attr("transform","translate(0,".concat(T,")")).call(Object(j.a)(D)),A.append("g").attr("class","y axis").attr("transform","translate(25,0)").call(Object(j.b)(I));var U=Object(O.a)().x((function(t){return D(a[t].x)})).y((function(t){return I(a[t].y)}));return 0===r.size&&r.set("All Data",a.map((function(t){return t.index}))),Array.from(r.entries()).forEach((function(t){var n=t[1];A.append("path").datum(n).attr("class","line").attr("d",U).attr("fill","none").attr("pointer-events","visibleStroke").style("stroke","black").attr("stroke-width","1px").on("mouseover",(function(n,a){var r;d({transform:"translate(".concat(n.clientX-10,"px, ").concat(n.clientY-10,"px)"),visibility:"visible"}),w({title:t[0],activeElement:n.currentTarget}),null===(r=e.current)||void 0===r||r.classList.add("faded")})).on("mouseout",(function(t,n){var a;d((function(t){return Object(s.a)(Object(s.a)({},t),{},{visibility:"hidden"})})),null===(a=e.current)||void 0===a||a.classList.remove("faded")}))})),A.selectAll(".dot").data(Array.from(a)).enter().append("circle").attr("class","dot").attr("cx",(function(t){return D(t.x)})).attr("cy",(function(t){return I(t.y)})).attr("r",(function(t){return N(t.size)})).on("mouseover",(function(t,e){d({transform:"translate(".concat(D(e.x),"px, ").concat(I(e.y),"px)"),visibility:"visible"}),w({title:e.title,activeElement:t.currentTarget})})).on("mouseout",(function(t,e){d((function(t){return Object(s.a)(Object(s.a)({},t),{},{visibility:"hidden"})}))})),function(){A.selectAll(".dot").remove(),A.select(".line").remove()}}}),[n,t]);return r.a.createElement("div",{className:"container"},!document.cookie.includes("token_v2")&&r.a.createElement(l.a,{push:!0,to:{pathname:"/login",state:{from:t}}}),r.a.createElement("div",{id:"graph-tooltip",style:o,onMouseOut:function(t){var n,a;d(Object(s.a)(Object(s.a)({},o),{},{visibility:"hidden"})),null===(n=k.activeElement)||void 0===n||n.classList.remove("active"),null===(a=e.current)||void 0===a||a.classList.remove("faded")},onMouseOver:function(t){var n,a,r;d(Object(s.a)(Object(s.a)({},o),{},{visibility:"visible"})),null===(n=k.activeElement)||void 0===n||n.classList.add("active"),(null===(a=k.activeElement)||void 0===a?void 0:a.classList.contains("line"))&&(null===(r=e.current)||void 0===r||r.classList.add("faded"))}},k.title),r.a.createElement("svg",{id:"journey-timeline",ref:e}),r.a.createElement("button",{id:"refresh-button",onClick:function(){return Object(g.b)(t)}}," ",r.a.createElement("img",{alt:"refresh graph",src:E})))},x=function(){var t=Object(a.useState)(""),e=Object(m.a)(t,2),n=e[0],c=e[1],i=Object(l.g)();return console.log(i),r.a.createElement("div",{className:"container"},r.a.createElement("input",{type:"text",id:"fname",name:"fname",onChange:function(t){c(t.target.value)},placeholder:"Login with your Notion Cookie"}),r.a.createElement("button",{onClick:function(){!function(t){var e=new Date(Date.UTC(2052,7,17,0,0,0));document.cookie="token_v2=".concat(t,";expires=").concat(e.toUTCString(),";path=/")}(n),function(){if(0===i.length)return r.a.createElement(l.a,{to:"/login"});i.goBack()}()}},"Submit"))},k=function(){return r.a.createElement(o.a,null,r.a.createElement(l.d,null,r.a.createElement(l.b,{path:"/login"},r.a.createElement(x,null)),r.a.createElement(l.b,{path:"/line_graph"},r.a.createElement(y,null)),r.a.createElement(l.b,{path:"/"},r.a.createElement(x,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[46,1,2]]]);
//# sourceMappingURL=main.6f560da3.chunk.js.map