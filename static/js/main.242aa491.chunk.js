(this["webpackJsonpnotion-graphs"]=this["webpackJsonpnotion-graphs"]||[]).push([[0],{24:function(t,e,n){},26:function(t,e,n){},27:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),c=n(16),i=n.n(c),o=(n(24),n(2)),s=n(14),l=n(3),u=n(1),f=n.n(u),b=n(17),p=n(37),m=n(38),d=n(39),v=n(41),h=n(40),j=(n(26),n(11)),O=n.p+"static/media/loop2.37a8f9ca.svg",y=function(){var t=Object(a.useRef)(null),e=window.location.search,n=Object(j.a)(e,function(){var t=Object(b.a)(f.a.mark((function t(e){var n,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://l175wxlpxi.execute-api.us-east-1.amazonaws.com/production/line_graph"+e,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/jsson",Cache:"no-cache"},credentials:"include"});case 2:return n=t.sent,t.next=5,n.json();case 5:return a=t.sent,t.abrupt("return",a);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),{refreshInterval:3e4}).data,c=Object(a.useState)((function(){return{visibility:"hidden",transform:"translate(0,0)"}})),i=Object(l.a)(c,2),u=i[0],y=i[1],x=Object(a.useState)((function(){return{title:"",activeElement:null}})),g=Object(l.a)(x,2),w=g[0],E=g[1];Object(a.useEffect)((function(){if(null!=t&&null!=t.current&&n){var a=n.data_points,r=new Map(Object.entries(n.series)),c=new URLSearchParams(e),i=function(t){return parseInt(c.get(t))},u=function(t,e){var n=i("".concat(t,"Min")),a=i("".concat(t,"Max"));if(!n||!a){var r=function(t,e){var n,a;return n=Math.min.apply(Math,Object(s.a)(t.map((function(t){return t[e]})))),(a=Math.max.apply(Math,Object(s.a)(t.map((function(t){return t[e]})))))===n&&(a+=0===a?1:.1*Math.abs(a)),[n,a]}(Array.from(e),t),c=Object(l.a)(r,2),o=c[0],u=c[1];return[n||o,a||u]}return[n,a]},f=u("x",a),b=Object(l.a)(f,2),j=b[0],O=b[1],x=u("y",a),g=Object(l.a)(x,2),w=g[0],M=g[1],k=u("size",a),A=Object(l.a)(k,2),S=A[0],z=A[1],T=Object(p.a)(t.current),_=t.current.clientWidth-50,C=t.current.clientHeight-50,I=[j,O+.1*Math.abs(O-j)],L=[25,_],W=n.is_x_time?Object(m.a)(I,L):Object(d.a)(I,L),B=Object(d.a)().domain([w-.1*Math.abs(M-w),M]).range([C,65]),J=Object(d.a)().domain([S,z+.1*Math.abs(z-S)]).range([5,15]);T.append("g").attr("class","x axis").attr("transform","translate(0,".concat(C,")")).call(Object(v.a)(W)),T.append("g").attr("class","y axis").attr("transform","translate(25,0)").call(Object(v.b)(B));var R=Object(h.a)().x((function(t){return W(a[t].x)})).y((function(t){return B(a[t].y)}));return 0===r.size&&r.set("All Data",a.map((function(t){return t.index}))),Array.from(r.entries()).forEach((function(t){var e=t[1];T.append("path").datum(e).attr("class","line").attr("d",R).attr("fill","none").attr("pointer-events","visibleStroke").style("stroke","black").attr("stroke-width","1px").on("mouseover",(function(e,n){y({transform:"translate(".concat(e.clientX-10,"px, ").concat(e.clientY-10,"px)"),visibility:"visible"}),E({title:t[0],activeElement:e.currentTarget})})).on("mouseout",(function(t,e){y((function(t){return Object(o.a)(Object(o.a)({},t),{},{visibility:"hidden"})}))}))})),T.selectAll(".dot").data(Array.from(a)).enter().append("circle").attr("class","dot").attr("cx",(function(t){return W(t.x)})).attr("cy",(function(t){return B(t.y)})).attr("r",(function(t){return J(t.size)})).on("mouseover",(function(t,e){y({transform:"translate(".concat(W(e.x),"px, ").concat(B(e.y),"px)"),visibility:"visible"}),E({title:e.title,activeElement:t.currentTarget})})).on("mouseout",(function(t,e){y((function(t){return Object(o.a)(Object(o.a)({},t),{},{visibility:"hidden"})}))})),function(){T.selectAll(".dot").remove(),T.select(".line").remove()}}}),[n,e]);return r.a.createElement("div",{className:"container"},r.a.createElement("div",{id:"graph-tooltip",style:u,onMouseOut:function(t){var e;y(Object(o.a)(Object(o.a)({},u),{},{visibility:"hidden"})),null===(e=w.activeElement)||void 0===e||e.classList.remove("active")},onMouseOver:function(t){var e;y(Object(o.a)(Object(o.a)({},u),{},{visibility:"visible"})),null===(e=w.activeElement)||void 0===e||e.classList.add("active"),console.log(w)}},w.title),r.a.createElement("svg",{id:"journey-timeline",ref:t}),r.a.createElement("button",{id:"refresh-button",onClick:function(){return Object(j.b)(e)}}," ",r.a.createElement("img",{alt:"refresh graph",src:O})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[27,1,2]]]);
//# sourceMappingURL=main.242aa491.chunk.js.map